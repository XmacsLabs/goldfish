# [200_21] 从 s7.c 拆分出 s7_scheme_inexact.h 和 s7_scheme_inexact.c

## 任务相关的代码文件
- src/s7.c
- src/s7_scheme_inexact.c
- src/s7_scheme_inexact.h
- devel/200_21.md

## 如何测试
```
xmake config --yes -vD
xmake b goldfish
bin/goldfish tests/goldfish/scheme/inexact-test.scm
bin/goldfish tests/test_all.scm
```

## 2026/02/17 完成 sin 函数迁移
### What
已完成 sin 函数从 s7.c 到 s7_scheme_inexact.c 的迁移：
1. 迁移 sin_p_p 函数实现，移除 WITH_GMP 条件编译代码
2. 迁移 g_sin 函数实现
3. 迁移 sin_p_d 函数实现，移除 WITH_GMP 条件编译代码
4. 迁移 sin_d_d 函数实现
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码（第17862-17970行）
7. 在 s7.c 中更新函数引用，将 defun 宏调用改为直接调用 s7_define_typed_function

### How
- WITH_GMP相关条件编译的代码已直接移除
- sin_p_p 函数使用 s7_ 前缀函数重写，遵循 sqrt_p_p 的模式
- 测试通过：所有 231 个测试用例正确，test_all.scm 测试套件通过

## 2026/02/17 将 sin 从 s7.c 迁移到 s7_scheme_inexact.c（计划）
### What
将 sin 函数从 s7.c 迁移到 s7_scheme_inexact.c，包括：
1. 迁移 sin_p_p 函数实现
2. 迁移 g_sin 函数实现
3. 迁移 sin_p_d 函数实现（如果存在）
4. 迁移 sin_d_d 函数实现（如果存在）
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码
7. 在 s7.c 中更新函数引用
8. 新增 libcurl 的构建定义，加载无法访问github时的构建

### How
WITH_GMP相关条件编译的代码直接移除即可，我们不会引入gmp这个依赖。


## 2026/02/14 s7_scheme_inexact

## 2026/02/14 将 nan? 从 s7.c 迁移至 s7_r7rs.c

## 2026/02/14 将 sqrt 从 s7.c 迁移至 s7_r7rs.c

## 2026/02/13 移除 file-exists? 在 s7.c 中的相关代码

## 2026/02/13 移除 getenv 在 s7.c 中的相关代码

## 2026/02/13 拆分 s7_r7rs.c 并重新实现 get-environment-variables