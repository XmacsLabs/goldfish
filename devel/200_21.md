# [200_21] 从 s7.c 拆分出 s7_scheme_inexact.h 和 s7_scheme_inexact.c

## 任务相关的代码文件
- src/s7.c
- src/s7_scheme_inexact.c
- src/s7_scheme_inexact.h
- devel/200_21.md

## 如何测试
```
xmake config --yes -vD
xmake b goldfish
bin/goldfish tests/goldfish/scheme/inexact-test.scm
bin/goldfish tests/test_all.scm
```

### 注意点
WITH_GMP相关条件编译的代码直接移除即可，我们不会引入gmp这个依赖。

### 验证结果
所有迁移函数均通过验证：
- ✅ 编译成功：`xmake b goldfish`
- ✅ 测试通过：`bin/goldfish tests/goldfish/scheme/inexact-test.scm` (231个测试全部通过)
- ✅ 完整测试套件：`bin/goldfish tests/test_all.scm` 通过

## 2026/02/18 将 atan 从 s7.c 迁移到 s7_scheme_inexact.c
### What
将 atan 函数从 s7.c 迁移到 s7_scheme_inexact.c，包括：
1. 迁移 atan_p_p 函数实现，移除 WITH_GMP 条件编译代码
2. 迁移 g_atan 函数实现，支持单参数和双参数版本
3. 迁移 atan_p_d 函数实现，移除 WITH_GMP 条件编译代码
4. 迁移 atan_d_d 函数实现
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码
7. 在 s7.c 中更新函数注册，将 defun 宏调用改为直接调用 s7_define_typed_function

## 2026/02/18 将 acos 从 s7.c 迁移到 s7_scheme_inexact.c
### What
将 acos 函数从 s7.c 迁移到 s7_scheme_inexact.c，包括：
1. 迁移 acos_p_p 函数实现，移除 WITH_GMP 条件编译代码
2. 迁移 g_acos 函数实现
3. 迁移 acos_p_d 函数实现，移除 WITH_GMP 条件编译代码
4. 迁移 acos_d_d 函数实现
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码
7. 在 s7.c 中更新函数注册，将 defun 宏调用改为直接调用 s7_define_typed_function

## 2026/02/18 将 asin 从 s7.c 迁移到 s7_scheme_inexact.c
### What
将 asin 函数从 s7.c 迁移到 s7_scheme_inexact.c，包括：
1. 迁移 asin_p_p 函数实现，移除 WITH_GMP 条件编译代码
2. 迁移 g_asin 函数实现
3. 迁移 asin_p_d 函数实现，移除 WITH_GMP 条件编译代码
4. 迁移 asin_d_d 函数实现
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码
7. 在 s7.c 中更新函数注册，将 defun 宏调用改为直接调用 s7_define_typed_function

## 2026/02/18 将 tan 从 s7.c 迁移到 s7_scheme_inexact.c
### What
将 tan 函数从 s7.c 迁移到 s7_scheme_inexact.c，包括：
1. 迁移 tan_p_p 函数实现，移除 WITH_GMP 条件编译代码
2. 迁移 g_tan 函数实现
3. 迁移 tan_p_d 函数实现，移除 WITH_GMP 条件编译代码
4. 迁移 tan_d_d 函数实现
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码
7. 在 s7.c 中更新函数注册，将 defun 宏调用改为直接调用 s7_define_typed_function

## 2026/02/18 将 cos 从 s7.c 迁移到 s7_scheme_inexact.c
### What
将 cos 函数从 s7.c 迁移到 s7_scheme_inexact.c，包括：
1. 迁移 cos_p_p 函数实现，移除 WITH_GMP 条件编译代码
2. 迁移 g_cos 函数实现
3. 迁移 cos_p_d 函数实现，移除 WITH_GMP 条件编译代码
4. 迁移 cos_d_d 函数实现
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码
7. 在 s7.c 中更新函数注册，将 defun 宏调用改为直接调用 s7_define_typed_function

## 2026/02/17 将 sin 从 s7.c 迁移到 s7_scheme_inexact.c
### What
将 sin 函数从 s7.c 迁移到 s7_scheme_inexact.c，包括：
1. 迁移 sin_p_p 函数实现，移除 WITH_GMP 条件编译代码
2. 迁移 g_sin 函数实现
3. 迁移 sin_p_d 函数实现，移除 WITH_GMP 条件编译代码
4. 迁移 sin_d_d 函数实现
5. 在 s7_scheme_inexact.h 中添加函数声明
6. 在 s7.c 中移除迁移的代码
7. 在 s7.c 中更新函数注册，将 defun 宏调用改为直接调用 s7_define_typed_function

## 2026/02/14 s7_scheme_inexact

## 2026/02/14 将 nan? 从 s7.c 迁移至 s7_r7rs.c

## 2026/02/14 将 sqrt 从 s7.c 迁移至 s7_r7rs.c

## 2026/02/13 移除 file-exists? 在 s7.c 中的相关代码

## 2026/02/13 移除 getenv 在 s7.c 中的相关代码

## 2026/02/13 拆分 s7_r7rs.c 并重新实现 get-environment-variables