# [209_6] 为 define-class 添加 %equals 方法

## 任务相关的代码文件
- goldfish/liii/oop.scm
- tests/goldfish/liii/oop-test.scm

## 如何测试
```
xmake config --yes
xmake b goldfish
bin/goldfish tools/lint.scm goldfish/liii/oop.scm
bin/goldfish tools/lint.scm tests/goldfish/liii/oop-test.scm
bin/goldfish -m r7rs tests/goldfish/liii/oop-test.scm
```

## 2025/11/02 为 define-class 添加 %equals 方法
### What
为 `define-class` 宏添加自动生成的 `%equals` 方法，提供基本的相等性比较功能。

1. 修改 `define-class` 宏实现，自动生成 `%equals` 方法
2. 添加全面的测试用例，验证各种场景下的行为
3. 更新文档，说明 `%equals` 方法的行为和限制

### Why
`define-class` 是基于 `define-case-class` 构建的类定义宏，但之前没有自动生成 `%equals` 方法。通过添加这个功能，使 `define-class` 创建的类实例能够进行基本的相等性比较，提高类的完整性和易用性。

### How
1. 在 `define-class` 宏中扩展实现，自动生成 `%equals` 方法
2. 使用 `equal?` 比较所有私有字段的值
3. 添加类型检查，确保比较对象是样本类实例
4. 验证两个实例是否为同一类型
5. 通过测试用例确保在各种场景下行为正确

## 实现细节
- 自动生成的 `%equals` 方法仅使用 `equal?` 比较内部字段
- 如果内部字段包含其他样本类实例，`equal?` 会比较它们的引用而不是内容
- 开发者可以自定义 `%equals` 方法来实现深度比较
- 方法会检查比较对象是否为样本类实例，如果不是则抛出 `type-error`