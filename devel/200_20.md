# [200_20] 将3rdparty/s7迁移至src

## 任务相关的代码文件
- `3rdparty/s7`
- `src`

## 如何测试
```
xmake config --yes -vD
bin/goldfish tests/test_all.scm
```

## 2026/02/13 迁移S7代码和xmake构建
### What
1. 将`3rdparty/s7/s7.c`和`3rdparty/s7/s7.h`重命名到`src/`目录
2. 修改`xmake.lua`构建配置：
   - 移除对s7外部包的依赖
   - 将s7.c直接添加到goldfish目标的源文件中
   - 同步原`3rdparty/s7/xmake.lua`中的S7配置到主xmake.lua
   - 添加`option("gmp")`支持
3. 更新`src/goldfish.hpp`中的头文件包含路径：`#include <s7.h>`改为`#include "s7.h"`
4. 验证构建和测试正常工作

### Why
后续会直接修改`s7.h`和`s7.c`，所以不再放在第三方代码里面。

### How
1. **文件迁移**：使用git重命名操作将s7源码文件从第三方目录移动到src目录
2. **构建配置更新**：
   - 移除xmake.lua中对s7包的依赖（第117行）
   - 将s7.c添加到goldfish目标的源文件列表（第94行）
   - 从原`3rdparty/s7/xmake.lua`同步S7配置到goldfish目标：
     - `add_defines("WITH_SYSTEM_EXTRAS=0")`
     - `if not is_plat("wasm") then add_defines("HAVE_OVERFLOW_CHECKS=0") end`
     - `add_defines("WITH_WARNINGS")`
     - `add_defines("WITH_R7RS=1")`
     - `if is_mode("debug") then add_defines("S7_DEBUGGING") end`
     - 添加`option("gmp")`和相关配置
   - 同样更新`goldfish_repl_wasm`目标的配置
3. **代码调整**：修改goldfish.hpp中的头文件包含方式
4. **测试验证**：构建成功并通过所有测试
