# [210_7] 实现set的谓词和构造器

## 任务相关的代码文件
- goldfish/liii/set.scm
- goldfish/srfi/srfi-113.scm
- tests/goldfish/liii/set-test.scm

## 如何测试
```bash
bin/goldfish tests/goldfish/liii/set-test.scm
bin/lint goldfish/liii/set.scm
bin/lint goldfish/srfi/srfi-113.scm
bin/lint tests/goldfish/liii/set-test.scm
```

## 2026/01/27 实现 set-member 函数
### What
在 (liii set) 模块中实现 set-member 函数，并在测试文件中新增相应的注释和测试用例。

1. 在 goldfish/srfi/srfi-113.scm 中实现 set-member 函数并添加到导出列表
2. 修改 goldfish/srfi/srfi-113.scm 中的 set-add! 函数，使其在哈希表中存储元素本身作为值，而不是固定值 1
3. 在 goldfish/liii/set.scm 的导出列表中添加 set-member 函数
4. 在 tests/goldfish/liii/set-test.scm 中添加 set-member 的文档注释和测试用例

### Why
set-member 函数用于在 set 中查找与指定元素相等的元素（可能不是同一个对象）。如果 set 底层使用哈希表，通过存储元素作为值，可以实现 O(1) 的查找。

### How
1. 修改 set-add!：`(hash-table-set! (set-hash-table s) element element)`
2. 实现 set-member：`(hash-table-ref/default (set-hash-table s) element default)`
3. 在测试中使用自定义的 hash 函数以确保 set-contains? 和 set-member 在使用自定义比较器时行为正确。

## 2026/01/27 实现 set-count 函数
### What
在 (liii set) 模块中实现 set-count 函数，并在测试文件中新增相应的注释和测试用例。

1. 在 goldfish/srfi/srfi-113.scm 中实现 set-count 函数并添加到导出列表
2. 在 goldfish/liii/set.scm 的导出列表中添加 set-count 函数
3. 在 tests/goldfish/liii/set-test.scm 中添加 set-count 的文档注释和测试用例

### Why
set-count 函数用于计算 set 中满足谓词的元素个数，这是 set 操作中常用的功能，是对 SRFI-113 的扩展。

### How
1. 在 SRFI-113 中实现 set-count 函数，使用 hash-table-for-each 遍历 set 元素并计数
2. 在 set.scm 中导入并重新导出 set-count 函数
3. 在测试文件中添加完整的文档注释和多种测试用例

## 2026/01/27 实现 set-find 函数
### What
在 (liii set) 模块中实现 set-find 函数，并在测试文件中新增相应的注释和测试用例。

1. 在 goldfish/srfi/srfi-113.scm 中实现 set-find 函数并添加到导出列表
2. 在 goldfish/liii/set.scm 的导出列表中添加 set-find 函数
3. 在 tests/goldfish/liii/set-test.scm 中添加 set-find 的文档注释和测试用例

### Why
set-find 函数用于在 set 中查找满足谓词的元素，如果找不到则调用 failure 函数，这是 set 操作中常用的功能，是对 SRFI-113 的扩展。

### How
1. 在 SRFI-113 中实现 set-find 函数，使用 hash-table-for-each 遍历 set 元素
2. 使用 call/cc 实现提前返回，当找到满足谓词的元素时立即返回该元素
3. 如果遍历完所有元素都没有找到，则调用 failure 函数
4. 在 set.scm 中导入并重新导出 set-find 函数
5. 在测试文件中添加完整的文档注释和多种测试用例

## 2026/01/27 实现 set-every? 函数
### What
在 (liii set) 模块中实现 set-every? 函数，并在测试文件中新增相应的注释和测试用例。

1. 在 goldfish/srfi/srfi-113.scm 中实现 set-every? 函数并添加到导出列表
2. 在 goldfish/liii/set.scm 的导出列表中添加 set-every? 函数
3. 在 tests/goldfish/liii/set-test.scm 中添加 set-every? 的文档注释和测试用例

### Why
set-every? 函数用于检查 set 中是否所有元素都满足给定的谓词函数，这是 set 操作中常用的功能，是对 SRFI-113 的扩展。

### How
1. 在 SRFI-113 中实现 set-every? 函数，使用 hash-table-for-each 遍历 set 元素
2. 使用 call/cc 实现提前返回，当找到不满足谓词的元素时立即返回 #f
3. 在 set.scm 中导入并重新导出 set-every? 函数
4. 在测试文件中添加完整的文档注释和多种测试用例

## 2026/01/27 实现 set-any? 函数
### What
在 (liii set) 模块中实现 set-any? 函数，并在测试文件中新增相应的注释和测试用例。

1. 在 goldfish/srfi/srfi-113.scm 中实现 set-any? 函数并添加到导出列表
2. 在 goldfish/liii/set.scm 的导出列表中添加 set-any? 函数
3. 在 tests/goldfish/liii/set-test.scm 中添加 set-any? 的文档注释和测试用例

### Why
set-any? 函数用于检查 set 中是否有元素满足给定的谓词函数，这是 set 操作中常用的功能。

### How
1. 在 SRFI-113 中实现 set-any? 函数，使用 hash-table-for-each 遍历 set 元素
2. 使用 call/cc 实现提前返回，当找到满足谓词的元素时立即返回 #t
3. 在 set.scm 中导入并重新导出 set-any? 函数
4. 在测试文件中添加完整的文档注释和多种测试用例

## 2026/01/27 在 (liii set) 中暴露 set-size
### What
在 (liii set) 模块中暴露 set-size 函数，并在测试文件中新增相应的注释和测试用例。

1. 在 goldfish/srfi/srfi-113.scm 的导出列表中添加 set-size 函数
2. 在 goldfish/liii/set.scm 的导出列表中添加 set-size 函数
3. 在 tests/goldfish/liii/set-test.scm 中添加 set-size 的文档注释和测试用例

### Why
set-size 函数已经实现但未暴露给用户使用，需要将其添加到 (liii set) 模块的公共 API 中。

### How
1. 首先在底层 SRFI-113 实现中导出 set-size 函数
2. 然后在 (liii set) 模块中导入并重新导出 set-size
3. 最后在测试文件中添加完整的文档注释和测试用例

## 2026/01/26 之前的提交和任务描述
### 2026/1/26 实现set的谓词和构造器
### 2026/1/26 将set改为rich-set