# 201_11: R7RS中string相关的文档和测试
## Agent
### 任务相关的代码文件
- tests/goldfish/liii/base-test.scm

### 如何测试
```
xmake config --yes
xmake b goldfish
bin/goldfish tests/goldfish/liii/base-test.scm
```
### 如何完成子任务
1. 切换到main分支，并拉取最新代码
2. 按照PR提交规范，切换到子任务分支
3. 完成子任务
4. 使用git提交代码，并显示代码合并链接


### PR提交规范
1. 分支名必须采用`da/201_11/xxx`这种格式，其中da是`$USER`，xxx是功能名称
2. 一个PR只包含一个子任务
3. 不要在文档里面写示例代码

## 2025/07/31 make-string的文档和测试
## 2025/07/31 string?的文档和测试用例
## 2025/08/06 string-length的文档和测试用例

### 任务描述
完善R7RS中string-length函数的文档和测试用例。

### 涉及函数
- string-length：返回字符串在UTF-8编码下的字节长度

### 测试设计
- 基础测试：空字符串、单字符、ASCII字符串
- 多字节字符测试：中文、emoji、特殊Unicode字符
- 边界测试：各种字符串长度
- 错误处理：参数类型和数量验证
- 兼容性测试：与make-string、string-append等函数联动

### 关键注意事项
- string-length实际返回的是UTF-8编码的字节长度，不是字符计数
- 中文字符在UTF-8中通常占用3字节
- emoji等Unicode字符可能占用2-4字节
- 空字符串长度为0
- 要正确处理转义字符和特殊符号

### 测试状态
- ✅ 已完成实现
- ✅ 测试通过：2121个测试全部正确
- ✅ 已合并到分支 da/201_11/string-length

## 2025/08/06 string-ref的文档和测试用例

### 任务描述
完善R7RS中string-ref函数的文档和测试用例。

### 涉及函数
- string-ref：从字符串中提取指定索引位置的字符

### 测试设计
- 基础测试：有效索引范围内的字符提取
- 边界测试：索引0和最后一个字符
- 错误处理：负索引、越界索引、非字符串参数
- 类型检查：确保参数是字符串和整数
- 与string-set!的对比测试：确保一致性

### 关键注意事项
- string-ref按字节索引UTF-8编码的字符串
- 多字节字符的中文字符会被正确解码返回
- 索引必须从0开始
- 越界访问会抛出错误
- 与Common Lisp中的char函数类似

### 测试状态
- ✅ 已完成实现
- ✅ 测试通过：覆盖所有边界条件
- ✅ 已合并到分支 da/201_11/string-ref

## 2025/08/06 string-set!的文档和测试用例

### 任务描述
完善R7RS中string-set!函数的文档和测试用例。

### 涉及函数
- string-set!：修改字符串指定索引位置的字符

### 测试设计
- 正常功能测试：修改字符串中不同位置的字符
- 边界测试：索引0和最后一个字符位置的修改
- 错误处理：负索引、越界索引、非字符串/非字符/非整数参数
- 类型验证：检查参数类型和数量
- 副作用验证：确认修改原字符串而非创建新字符串
- 内存安全：确保不会在写入时越界

### 关键注意事项
- string-set!是修改原始字符串的破坏性操作
- 索引基于UTF-8编码的字节位置，不是字符位置
- 多字节字符的修改需要特别注意编码边界
- 必须提供三个参数：字符串、索引、字符
- 修改后字符串长度保持不变
- 与Common Lisp的(setf char)类似

### 测试状态
- ✅ 已完成实现
- ✅ 测试通过：覆盖所有边界条件和错误场景
- ✅ 已合并到分支 da/201_11/string-set
