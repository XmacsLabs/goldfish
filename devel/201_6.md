# [201_6] string 相关的文档和测试

## 任务相关的代码文件
- goldfish/liii/string.scm
- tests/goldfish/liii/string-test.scm
- goldfish/srfi/srfi-13.scm

## 如何测试
```
xmake config --yes
xmake b goldfish
bin/goldfish -m r7rs tests/goldfish/liii/string-test.scm
```

## PR提交规范
1. 每次提PR前，先从main分支拉取最新代码：`git pull origin main`
2. 分支名必须采用`da/201_6/xxx`这种格式，其中da是`$USER`，xxx是功能名称
3. 一个PR只包含一个功能
4. **注意：不要在文档里面写示例代码**

## 子任务管理
### 2025/08/07 ✅ 完成 string-upcase 的文档和测试
已实现 string-upcase 的完整测试用例和文档说明，包括函数版本和面向对象版本。已确保正确处理边界情况、参数类型验证和错误处理。

### 2025/08/07 ✅ 完成 string-downcase 的文档和测试
已实现 string-downcase 的完整测试用例和文档说明，包括函数版本和面向对象版本。

已完成全面的测试覆盖，包括：
- 基本功能测试：正确转换大写字符串为小写
- 边界情况测试：空字符串、单字符、大写字母、小写字母混合等
- 范围参数测试：使用start/end参数限定转换范围，确保正确处理索引边界
- 错误处理测试：验证对非法输入参数抛出正确的异常类型
- 特殊字符测试：验证非ASCII字符（中文、Unicode扩展字符）保持不变，确保只转换ASCII范围内的字符
- 大字符串测试：确保正确识别UTF-8编码边界

测试覆盖了所有预期功能：
- 无参数形式：转换整个字符串
- start参数形式：从指定位置开始转换到字符串末尾
- start/end参数形式：限定范围内的字符转换
- 边界条件验证：确保start <= end且索引在有效范围内

### 2025/08/07 完成 string-reverse 的文档和测试
已实现 string-reverse 的完整测试用例和文档说明，包括函数版本和面向对象版本。
已完成全面的测试覆盖，包括：
- 基本功能测试：字符串字符顺序反转
- 边界情况测试：空字符串、单字符、多字节字符等
- 范围参数测试：start和end参数的边界验证
- 错误处理测试：参数类型验证和越界处理
- Unicode和特殊字符测试：不支持中文、emoji等多字节字符的正确处理（基于字节而非字符级别）
- 面向对象和函数式用法验证

### 2025/07/24 完成 string-replace 的文档和测试
待实现 string-replace 的完整测试用例和文档说明，包括函数版本和面向对象版本。

### 2025/07/24 完成 string-split 的文档和测试
待实现 string-split 的完整测试用例和文档说明，包括函数版本和面向对象版本。

### 2025/07/24 ✅ 完成 string-null? 的文档和测试
已实现 string-null? 的完整测试用例和文档说明，支持判断字符串是否为空字符串，确保正确处理空字符串、非空字符串和非字符串参数的情况。

### 2025/07/24 ✅ 完成 string-join 的文档和测试
已实现 string-join 的完整测试用例和文档说明，支持多种连接语法模式如infix、prefix、suffix和strict-infix等، 确保正确处理空列表和各种边界情况。

### 2025/08/05 ✅ 完成 string-take 的文档和测试
已实现 string-take 的完整测试用例和文档说明，支持从字符串开头提取指定数量的字符，确保正确处理边界情况如空字符串、负数参数和超出字符串长度的参数。

### 2025/08/05 ✅ 完成 string-take-right 的文档和测试
已实现 string-take-right 的完整测试用例和文档说明，支持从字符串末尾提取指定数量的字符，确保正确处理边界情况如空字符串、负数参数和超出字符串长度的参数，以及参数类型验证。

### 2025/08/06 ✅ 完成 string-every 的文档和测试
已实现 string-every 的完整测试用例和文档说明，支持字符和谓词检查，确保正确处理空字符串和各种字符类型验证，包括start/end参数的边界检查。

### 2025/08/06 ✅ 完成 string-copy 的文档和测试
已实现 string-copy 的完整测试用例和文档说明，支持字符串的深拷贝功能，确保正确处理不同参数形式和各种边界情况，包括深拷贝验证、参数边界检查、错误处理等功能。

### 2025/08/06 ✅ 完成 string-drop 的文档和测试
已实现 string-drop 的完整测试用例和文档说明，支持从字符串开头移除指定数量的字符，确保正确处理边界情况如空字符串、负数参数、超出字符串长度的参数，以及参数类型验证。

### 2025/08/06 ✅ 完成 string-drop-right 的文档和测试
已实现 string-drop-right 的完整测试用例和文档说明，支持从字符串末尾移除指定数量的字符，确保正确处理边界情况如空字符串、负数参数、超出字符串长度的参数，以及参数类型验证。

### 2025/08/06 ✅ 完成 string-pad 的文档和测试
已实现 string-pad 和 string-pad-right 的完整测试用例和文档说明，支持字符串左右填充功能，确保正确处理各种边界情况包括空字符串、负数值、不同填充字符和位置等。支持标准SRFI-13语法，提供了全面的参数验证和错误处理。

### 2025/08/06 ✅ 完成 string-trim 的文档和测试
已实现 string-trim, string-trim-right 和 string-trim-both 的完整测试用例和文档说明，支持从字符串开头、末尾或两端同时移除指定字符/空白字符功能，确保正确处理空字符串、全空白字符串、非字符串参数和各种边界情况。支持使用字符或谓词指定要移除的字符类型，支持start/end参数指定操作范围。

### 2025/08/06 ✅ 完成 string-index 的文档和测试
已实现 string-index 和 string-index-right 的完整测试用例和文档说明，支持根据字符或谓词在字符串中查找匹配的索引位置。函数支持start/end参数指定搜索范围，确保正确处理空字符串、找不到匹配项和边界情况。提供了全面的参数验证和错误处理测试覆盖。

### 2025/08/07 ✅ 完成 string-starts? 的文档和测试
已实现 string-starts? 的完整测试用例和文档说明，包括函数版本和面向对象版本。支持判断字符串是否以指定前缀开始。

已完成全面的测试覆盖，包括：
- 基本功能测试：正确识别字符串前缀匹配情况
- 边界情况测试：空字符串、单字符、多字节字符、混合类型字符串等
- 错误处理测试：参数类型验证，确保抛出 type-error 异常
- 中文和特殊字符测试：验证 Unicode 支持

### 2025/08/07 ✅ 完成 string-tokenize 的文档和测试
已实现 string-tokenize 的完整测试用例和文档说明，支持将字符串按指定分隔符分割成多个子字符串，支持函数形式和面向对象用法。确保正确处理空字符串、连续分隔符、边界情况和各种复杂场景，提供了全面的参数验证和错误处理测试覆盖，支持可选的start/end参数限定操作范围。

### 2025/08/07 ✅ 完成 string-prefix? 的文档和测试
已实现 string-prefix? 函数的完整测试用例和文档说明，用于检查字符串是否以指定前缀开头。

已实现全面的测试覆盖，包括：
- 基本功能测试：正确识别字符串前缀匹配情况
- 边界情况测试：空字符串、单字符、各种长度前缀等
- ASCII字符串测试：验证基本字符集支持
- 单字符/多字符测试：确保正确处理各种前缀长度
- 真值验证：确保正确返回#t/#f值
- 边界条件验证：空字符串、相同字符串、长度不足等情况

测试覆盖了所有预期功能：
- 正确识别字符串前缀匹配
- 正确处理边界情况（空字符串、长前缀）
- 使用现有string-prefix?函数进行全面测试
- 验证异常处理和参数验证

### 2025/08/08 ✅ 完成 string-remove-suffix 的文档和测试
已实现 string-remove-suffix 的完整测试用例和文档说明，包括函数版本和面向对象版本。

已提供全面的测试覆盖，包括：
- 基本功能测试：正确识别字符串后缀并移除、不修改原字符串
- 边界情况测试：空字符串、单字符、相同字符串、无后缀情况等
- 中文和Unicode支持：验证中文文件名、特殊字符的正确处理
- 复杂场景：多级后缀、文件路径、扩展名处理、大小写敏感测试
- 错误处理测试：验证参数类型验证抛出正确的 type-error 异常
- 文件路径模拟：支持文件路径中的后缀移除操作

测试覆盖了所有预期功能：
- 基本后缀匹配和移除
- 字符串边界条件处理
- 特殊字符和中文文件名支持
- 错误处理和参数类型验证
- 新对象返回值验证（深拷贝行为）

### 2025/08/08 ✅ 完成 string-map 的文档和测试
已实现 string-map 的完整测试用例和文档说明，包括遵循R7RS标准语法的详细文档。

已提供全面的测试覆盖，包括：
- 基本功能测试：字符转换如大小写转换、字符映射
- 复杂转换测试：谓词函数、条件映射、复杂字符处理
- 边界情况测试：空字符串、单字符字符串、长字符串处理
- 特殊字符测试：Unicode字符、中文、数值字符处理
- 错误处理测试：参数类型验证、过程验证
- 品种转换测试：不同字符集的适应性测试

测试覆盖了R7RS标准string-map功能：
- 基本语法：(string-map proc str)形式的基本支持
- 字符转换验证：确保每个字符都被正确处理
- 函数映射验证：lambda表达式和内置函数的正确性
- 错误处理验证：参数类型验证和边界情况处理
- 实际应用示例：提供丰富的转换案例

验证所有基础STRING到STRING的映射转换正确实施，符合Scheme标准规范。

### 2025/08/08 ✅ 完成 string-for-each 的文档和测试
已实现 string-for-each 的完整测试用例和文档说明，支持将给定过程应用于字符串的每个字符，用于副作用操作。

已提供全面的测试覆盖，包括：
- 基本功能测试：对每个字符执行副作用操作的验证
- 边界情况测试：空字符串、单字符字符串、长字符串处理
- 特殊字符测试：空白字符、中文、数值字符处理
- 错误处理测试：参数类型验证，确保正确处理非法输入
- 多功能测试：同时处理多种副作用状态更新
- 长字符串测试：确保处理大量数据时的正确性

测试覆盖了所有预期功能：
- 字符遍历处理：正确将过程应用于每个字符
- 状态变量修改：验证可变状态的正确更新
- 统计功能实现：字符计数、类型分类等
- 错误处理和异常抛出：验证参数类型检查和边界处理
- Unicode字符处理：支持中文等多字节字符的正确识别和处理

实现完整的string-for-each功能，符合R7RS Scheme标准规范要求。
