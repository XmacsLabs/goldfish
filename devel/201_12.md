# [201_12] R7RS基础字符串函数和进阶测试完善

## 任务相关的代码文件
实现：
- goldfish/liii/string.scm  (R7RS基础字符串函数)
- goldfish/srfi/srfi-13.scm  (SRFI-13字符串函数)

测试用例：
- tests/goldfish/liii/string-test.scm
- tests/goldfish/srfi/srfi-13-test.scm

## 如何测试
```
xmake config --yes
xmake b goldfish
bin/goldfish -m r7rs tests/goldfish/liii/string-test.scm
bin/goldfish -m r7rs tests/goldfish/srfi/srfi-13-test.scm
```

## 任务范围标准
- 完善R7RS标准的基础字符串函数（string包含的所有标准函数）
- 不包含现有Goldfish实现已支持的SRFI-13函数（由201_6任务完成）
- 专注R7RS标准函数的深度测试、边界条件验证、性能基准测试
- 必须验证UTF-8字符和ASCII的兼容性
- 重点测试R7RS字符串基本操作：string-length, string-ref, string-set!, string-append等

## 测试要求
### 必测项目
1. **边界值验证**：空字符串、单字符、null字符、特殊控制字符
2. **索引边界**：负索引、越界索引、字符串末尾边界
3. **字符类型覆盖**：ASCII、中文、emoji、特殊符号、控制字符
4. **异常处理**：越界访问、类型错误、不可变字符串修改尝试
5. **性能验证**：大字符串(1M+字符)处理速度、内存使用基准
6. **R7RS标准兼容性**：与R7RS规范的完全一致性和兼容性验证

### 禁止内容
- 不添加新的SRFI-13函数实现或测试（由201_6任务完成）
- 不修改现有SRFI-13函数的实现逻辑

## 如何测试
```
xmake config --yes
xmake b goldfish
bin/goldfish -m r7rs tests/goldfish/liii/string-test.scm
bin/goldfish -m r7rs tests/goldfish/srfi/srfi-13-test.scm
```

## 测试验证规范
- 必须通过`bin/goldfish`完整执行
- 每个R7RS字符串函数至少12个边界测试用例
- 异常类型用`check-catch`精确验证并确保与R7RS标准一致
- Unicode场景验证输入输出一致性
- 必须使用R7RS标准定义的异常类型和错误处理机制

## PR提交规范
1. 每次提PR前先拉取最新代码：`git pull origin main`
2. 创建分支：`git checkout -b "$USER/201_12/xxx"` （如`string-length-boundary`, `string-ref-edge-cases`）
3. 一个PR只完善一个R7RS字符串函数的一个方面（文档或测试）
4. **文档规范**：中文描述+边界说明+性能约束+R7RS标准引用
5. 文档**禁止包含示例代码**，仅描述R7RS标准定义的函数行为
6. 必须标注R7RS标准中的章节引用

## 任务管理
任务管理见 [201_12.md](../plan/201_12.md)。

devel/201_12.md 是告诉Agent按照什么方式以什么标准完成这个任务，plan/201_12.md 是具体的任务拆分和执行任务的状态记录。